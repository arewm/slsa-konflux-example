# Default values for konflux-onboarding
# This is a YAML-formatted file.

# Cluster configuration
# Set to false when deploying to managed clusters without cluster-admin access
# This will skip resources that require cluster-level permissions (e.g., ClusterRole bindings)
requiresClusterAdmin: true

# Repository URL for slsa-konflux-example (used for pipelines and policy data)
# This can be customized for forks or local development
repositoryUrl: "https://github.com/arewm/slsa-konflux-example"

# User and namespace configuration
# Create the namespace (set to false if namespace already exists)
createNamespace: true

# List of users to grant admin access in the tenant namespace
# Each user will get a RoleBinding to konflux-admin-user-actions
# and a ClusterRoleBinding for self-access-reviewer (if requiresClusterAdmin is true)
users:
  - user1

# Create the target (managed) namespace (set to true to auto-create the managed namespace)
# When enabled, creates the namespace specified in release.targetNamespace
createTargetNamespace: true

# List of users to grant admin access in the target (managed) namespace
# Typically different from tenant users for proper separation of concerns
targetUsers:
  - user2

# Create release-pipeline service account in the tenant namespace
# This is needed for release operations from the tenant context
createReleaseServiceAccount: true

# Name of the application and component
applicationName: ""

# Git repository URL for the component
gitRepoUrl: ""

# Namespace to deploy resources
namespace: "slsa-e2e-tenant"

# Optional: Git revision/branch to track (defaults to main)
gitRevision: "main"

# Optional: Context directory in the repository
gitContext: "."

# Optional: Application display name (if different from applicationName)
displayName: ""

# Optional: Container image for the component (defaults to registry-service.kind-registry/konflux-festoji:latest)
# If you provide a custom image, you must also provide dockerconfigjson
containerImage: "registry-service.kind-registry/konflux-festoji:latest"

# Optional: Custom container image URL (overrides containerImage default)
# When set, you must provide dockerconfigjson for authentication
customContainerImage: ""

# Optional: Docker config JSON for custom container image authentication
# Required when customContainerImage is set
# This should be the base64-encoded .dockerconfigjson content
# Example: eyJhdXRocyI6eyJyZWdpc3RyeS5leGFtcGxlLmNvbSI6eyJ1c2VybmFtZSI6InVzZXIiLCJwYXNzd29yZCI6InBhc3MiLCJhdXRoIjoiZFhObGNqcHdZWE56In19fQ==
dockerconfigjson: ""

# Image repository configuration
image:
  # Generate ImageRepository via image-controller (requires image-controller to be deployed)
  # Set to true to trigger automatic Quay repository and credential creation
  # Default: false (use manually specified containerImage)
  generateRepository: false

# Release configuration
release:
  # Target namespace for ReleasePlanAdmission and EnterpriseContractPolicy
  # This is where the release plan admission will be created (managed namespace)
  targetNamespace: "slsa-e2e-managed-tenant"

  # Author for automated releases
  # This is required for automated releases to pass validation
  # Default: user1
  author: "user1"

  # Optional: Release destination registry
  # This is where the component will be pushed after release
  # If not set, defaults to registry-service.kind-registry/released-{applicationName}
  destination: ""

  # Optional: Environment name for the release
  # Default: production
  environment: "production"

  # Optional: Enterprise Contract policy name
  # Default: ec-policy
  policyName: "ec-policy"

  # Optional: Service account for release pipeline
  # Default: release-service-account
  serviceAccount: "release-service-account"

  # Trusted artifacts configuration
  trustedArtifacts:
    # OCI repository for storing trusted artifacts
    # This is where intermediate build artifacts are stored during release
    # Examples:
    #   - For KinD: "registry-service.kind-registry/trusted-artifacts"
    #   - For Quay: "quay.io/myorg/trusted-artifacts"
    # Default: registry-service.kind-registry/trusted-artifacts
    ociStorage: "registry-service.kind-registry/trusted-artifacts"

    # Username for trusted artifacts registry authentication
    # Required when using external registries (leave empty for internal KinD registry)
    username: ""

    # Password/token for trusted artifacts registry authentication
    # Required when using external registries (leave empty for internal KinD registry)
    password: ""

  # Pipeline configuration
  pipeline:
    # Git repository URL for the pipeline
    # Defaults to .Values.repositoryUrl
    url: ""

    # Git revision/branch for the pipeline
    # Default: main
    revision: "main"

    # Path to the pipeline YAML in the repository
    # Default: managed-context/pipelines/slsa-e2e-release/slsa-e2e-release.yaml
    pathInRepo: "managed-context/pipelines/slsa-e2e-release/slsa-e2e-release.yaml"

  # Enterprise Contract policy configuration
  policy:
    # Policy OCI bundle reference
    # Default: quay.io/enterprise-contract/ec-release-policy:konflux
    policyBundle: "quay.io/enterprise-contract/ec-release-policy:konflux"

    # Policy data source (git repository or OCI bundle with policy rules)
    # Defaults to managed-context/policies/ec-policy-data/data in .Values.repositoryUrl
    # Can be overridden to use: github.com/release-engineering/rhtap-ec-policy//data
    policyData: ""

    # Acceptable bundles data source (OCI bundle with allowed Tekton task/pipeline bundles)
    # Default: oci::quay.io/konflux-ci/tekton-catalog/data-acceptable-bundles:latest
    # For custom bundles generated by hack/build-pipeline.sh:
    #   Set to: oci::<registry>/<namespace>/slsa-e2e-data-acceptable-bundles:latest
    acceptableBundles: "oci::quay.io/konflux-ci/tekton-catalog/data-acceptable-bundles:latest"
