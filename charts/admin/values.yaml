# Default values for build-service-config
# This is an ADMIN-ONLY Helm chart for configuring build-service pipeline bundles
# WARNING: This chart modifies cluster-wide build-service configuration

# Namespace where build-service is installed
namespace: build-service

# ConfigMap name (should not be changed unless build-service uses a different name)
configMapName: build-pipeline-config

# Default pipeline name (the pipeline used when no specific pipeline is requested)
defaultPipelineName: slsa-e2e-oci-ta

# Registry configuration for pipeline bundles
# This allows easy customization for local development or custom registries
registry:
  # Registry host (e.g., quay.io, ghcr.io)
  host: "quay.io"

  # Registry namespace/organization
  namespace: "arewm"

  # Optional: Pipeline repository prefix
  # If set, will be used as: {host}/{namespace}/{pipelinePrefix}{pipelineName}
  # If empty, will be used as: {host}/{namespace}/pipeline-{pipelineName}
  pipelinePrefix: "pipeline-"

# Pipeline bundle overrides
# Add entries here to override specific pipeline bundle references
# Each entry should specify the pipeline name and optionally the bundle reference
# If bundle is not specified, it will be constructed from registry settings as:
#   {registry.host}/{registry.namespace}/{registry.pipelinePrefix}{name}:latest
pipelines:
  - name: slsa-e2e-oci-ta
    # bundle: quay.io/arewm/pipeline-slsa-e2e-oci-ta:latest  # Optional: explicit bundle reference
    # If bundle is omitted, will use: {registry.host}/{registry.namespace}/{registry.pipelinePrefix}slsa-e2e-oci-ta:latest
    description: "SLSA end-to-end pipeline with configurable security scanners"
    detail: |
      This pipeline demonstrates SLSA compliance with trusted artifacts and configurable security scanning.

      The pipeline uses OCI artifacts for data sharing instead of PVCs, ensuring trusted task compliance
      for Enterprise Contract policies.
    additionalParams:
      - enable-clair-scan
      - enable-trivy-sbom-scan

# Full pipeline configuration (alternative to individual overrides)
# If you need complete control, you can specify all pipelines here
# When set, this takes precedence over individual pipeline overrides
fullConfig: ""
  # Example:
  # |
  # default-pipeline-name: slsa-e2e-oci-ta
  # pipelines:
  # - name: fbc-builder
  #   bundle: quay.io/konflux-ci/tekton-catalog/pipeline-fbc-builder@sha256:...
  # - name: docker-build
  #   bundle: quay.io/konflux-ci/tekton-catalog/pipeline-docker-build@sha256:...
